"use strict";window.onload=function(){var r=document.querySelector(".chat__messages"),e=document.querySelector(".send"),t=document.querySelector(".send__input"),o=document.querySelectorAll(".contact"),c=document.querySelector(".btn-menu"),n=document.querySelector(".search__input"),s={avatar:"dist/img/cageholder_4.jpg",type:"sended",chat:r};function a(){}((a.prototype=s).constructor=a).prototype.sendMessage=function(e){this.chat.innerHTML+='<div class="message message--'+this.type+'">\n\t\t<img src="'+this.avatar+'" alt="person" class="message__img">\n\t\t<p class="message__text">'+e+"</p>\n\t\t</div>"};var i=document.querySelectorAll(".contact")[0].querySelector("img").src;function l(){this.avatar=i,this.type="received"}((l.prototype=Object.create(s)).constructor=l).prototype.setAvatar=function(e){this.avatar=e},l.prototype.getPhrase=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&200==n.status&&t(n.responseText)},n.open("GET",e),n.send()};var u=new l,d=new a;e.addEventListener("submit",function(e){e.preventDefault(),t.value&&(d.sendMessage(t.value),u.getPhrase("json/phrases.json",function(e){var t,n,s=JSON.parse(e),a=(t=s,n=Object.keys(t),t[n[Math.floor(Math.random()*n.length+0)]]);setTimeout(function(){u.sendMessage(a),r.scrollTo(0,r.scrollHeight)},500)}),t.value="")});for(var v={},h=0;h<o.length;h++)v[o[h].querySelector(".contact__name").innerHTML]={history:""},o[h].addEventListener("click",function(e){if(!this.classList.contains("is-active")){var t=document.querySelector(".contact.is-active").querySelector(".contact__name").innerHTML,n=this.querySelector(".contact__name").innerHTML;v[t].history=r.innerHTML;for(var s=0;s<o.length;s++)o[s].classList.remove("is-active");this.classList.add("is-active");var a=this.querySelector("img").src;u.setAvatar(a),r.innerHTML=v[n].history,r.scrollTo(0,r.scrollHeight),c.classList.remove("is-active")}});c.addEventListener("click",function(e){this.classList.toggle("is-active")});var y=document.querySelectorAll(".contact__name");n.addEventListener("input",function(){(function(e){for(var t=this.value.toLowerCase(),n=0;n<e.length;n++)e[n].textContent.toLowerCase().includes(t)&&t||!t?e[n].parentElement.style.display="flex":e[n].parentElement.style.display="none"}).call(this,y)})};